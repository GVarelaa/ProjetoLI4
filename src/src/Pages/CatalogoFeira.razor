@page "/catalogo/{nomeFeira}"
@using src.Data
@inject Facade Facade

<style>
    body, html {
        height: 100%;
        width: 100%;
    }

    .container-desc {
        background-image: linear-gradient(lightskyblue 70%, white);
        padding-top: 20px;
        padding-bottom: 100px;
        text-align: left;
    }

    .container-desc h3, p{
        margin-top: 10px;
        margin-left: 100px;
        margin-right: 100px;
    }

    .feiras {
        border: solid;
        height: 100%;
        margin-left: 10%;
        margin-right: 10%;
        display: grid;
        grid-template-columns: auto auto auto;
    }

    .feiras h1 {
        padding-top: 10px;
    }

    .feira-square {
        justify-self: center;
        align-self: center;
        width: 150px;
        height: 150px;
        border: solid;
    }

        .feira-square:before {
            content: "";
            float: left;
            padding-top: 10%; /* initial ratio of 1:1*/
        }

    .feiras-container {
        height: 60%;
        display: grid;
        grid-template-columns: 10% auto 10%;
        grid-template-rows: auto;
    }

    .icon {
        justify-self: center;
        align-self: center;
    }

    .fa-arrow-left {
        font-size: 50px;
        color: var(--color-blue);
    }

    .fa-arrow-right {
        font-size: 50px;
        color: var(--color-blue);
    }

    .feira-btn {
        width: 100%;
        height: 100%;
    }

</style>



<div class="container-desc">
    <h3>CatalogoFeira</h3>
    <p style="color: white">Local</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec quam felis, malesuada vel elementum id, molestie at odio. Donec at massa sem. Curabitur laoreet ut turpis eget euismod. Proin placerat dictum lorem, id hendrerit dui tristique nec. Duis eget lorem aliquam velit lacinia rhoncus. Suspendisse scelerisque sapien est, eget ultricies libero consequat sit amet. Pellentesque mollis ornare libero id tempor. Sed rutrum dolor eget dolor mattis tincidunt.</p>
</div>



<div class="feiras-container">
    <div class="icon"><button><i class="fa fa-arrow-left"></i></button></div>
    <div class="feiras">
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto1"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%"/></a></button>
            <h1>Produto1</h1>
        </div>
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto2"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%" /></a></button>
            <h1>Produto2</h1>
        </div>
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto3"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%" /></a></button>
            <h1>Produto3</h1>
        </div>
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto4"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%"/></a></button>
            <h1>Produto4</h1>
        </div>
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto5"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%" /></a></button>
            <h1>Produto5</h1>
        </div>
        <div class="feira-square">
            <button class="feira-btn"><a href="catalogo/Feira1/Produto6"><img src="css/batata-vermelha-final-1.jpg" width="100%" height="100%" /></a></button>
            <h1>Produto6</h1>
        </div>
    </div>
    <div class="icon"><button><i class="fa fa-arrow-right"></i></button></div>
</div>


@code {
    [Parameter]
    public String? nomeFeira{ get; set; }
    private String? descfeira;
    private List<string>? catalogo;
    private List<string>? feirasShown;
    private int index;

    protected override async Task OnInitializedAsync()
    {
        descfeira = await Facade.getDetalhesFeira();
        catalogo = await Facade.getCatalogo();
        feirasShown = new List<string>();
        for(int i=0; i<6; i++){
            feirasShown.Add(catalogo[i]);
        }
        index = 0;
    }

    private void advanceFeiras(){
        index++;
        feirasShown.Clear();
        for(int i=index*6; i<(index+1)*6; i++){
            feirasShown.Add(catalogo[i]);
        }
    }

    private void goBackFeiras()
    {
        feirasShown.Clear();
        if (index > 0)
        {
            index--;
            for (int i = index * 6; i < (index + 1) * 6; i++)
            {
                feirasShown.Add(catalogo[i]);
            }
        }
        
    }

    public void OnGet(String feira){
        this.nomeFeira = feira;
    }
}
